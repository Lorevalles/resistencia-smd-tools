
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Combinador de Resistencias y Capacitores</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <style>
        body { font-family: sans-serif; padding: 20px; background-color: #f5f5ff; color: #002244; }
        .container { background: #ffffff; border-radius: 8px; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { color: #003366; }
        select, input { font-size: 1em; padding: 5px; margin: 5px; }
        button { font-size: 1em; padding: 5px 10px; background: #003366; color: white; border: none; cursor: pointer; }
        .results { background: #eef2ff; padding: 10px; margin-top: 20px; border-radius: 5px; }
        .results h3 { margin-bottom: 5px; }
    </style>
</head>
<body>
<div class="container">
    <h1>Combinador de Resistencias y Capacitores</h1>
    <label for="tipo">Selecciona tipo:</label>
    <select id="tipo" onchange="toggleUnidad()">
        <option value="resistor">Resistencia</option>
        <option value="capacitor">Capacitor</option>
    </select><br>
    <label for="valor">Valor objetivo:</label>
    <input type="number" id="valor" step="any"><br>
    <div id="unidadDiv">
        <label for="unidad">Unidad (solo para capacitores):</label>
        <select id="unidad">
            <option value="pF">pF</option>
            <option value="nF">nF</option>
            <option value="uF">µF</option>
        </select><br>
    </div>
    <button onclick="calcular()">Calcular</button>
    <div class="results" id="resultados"></div>
    <br><a href="index.html">&larr; Volver al índice</a>
</div>
<script>
const resistencias = [1, 2.2, 4.7, 6.8, 10, 18, 22, 33, 47, 56, 68, 82, 100, 120, 150, 180, 220, 270, 330, 390, 470, 560, 680, 820, 1000];
const capacitores_pF = [0.5, 1, 1.5, 2.2, 3.3, 4.7, 6.8, 10, 15, 22, 33, 47, 56, 68, 82, 100, 120, 150, 180, 220, 270, 330, 390, 470, 560, 680, 820, 1000];

function toggleUnidad() {
    document.getElementById('unidadDiv').style.display =
        document.getElementById('tipo').value === "capacitor" ? "block" : "none";
}

function calcular() {
    const tipo = document.getElementById("tipo").value;
    let objetivo = parseFloat(document.getElementById("valor").value);
    let escala = 1;
    if (tipo === "capacitor") {
        const unidad = document.getElementById("unidad").value;
        if (unidad === "nF") escala = 1e3;
        else if (unidad === "uF") escala = 1e6;
        objetivo *= escala;
    }
    const valores = tipo === "resistor" ? resistencias : capacitores_pF;
    const serie = [], paralelo = [];
    for (let i = 0; i < valores.length; i++) {
        for (let j = i; j < valores.length; j++) {
            const a = valores[i], b = valores[j];
            const totalS = tipo === "resistor" ? a + b : 1 / (1/a + 1/b);
            const totalP = tipo === "resistor" ? 1 / (1/a + 1/b) : a + b;
            const errS = Math.abs((totalS - objetivo) / objetivo) * 100;
            const errP = Math.abs((totalP - objetivo) / objetivo) * 100;
            serie.push({a, b, total: totalS, err: errS});
            paralelo.push({a, b, total: totalP, err: errP});
        }
    }
    serie.sort((x, y) => x.err - y.err);
    paralelo.sort((x, y) => x.err - y.err);
    const unidadText = tipo === "capacitor" ? document.getElementById("unidad").value : "Ω";
    let html = "<h3>Serie (mejores 2):</h3><ul>";
    for (let i = 0; i < 2 && i < serie.length; i++) {
        html += `<li>${serie[i].a} + ${serie[i].b} = ${serie[i].total.toFixed(3)} ${unidadText} (${serie[i].err.toFixed(2)}% error)</li>`;
    }
    html += "</ul><h3>Paralelo (mejores 2):</h3><ul>";
    for (let i = 0; i < 2 && i < paralelo.length; i++) {
        html += `<li>${paralelo[i].a} || ${paralelo[i].b} = ${paralelo[i].total.toFixed(3)} ${unidadText} (${paralelo[i].err.toFixed(2)}% error)</li>`;
    }
    html += "</ul>";
    document.getElementById("resultados").innerHTML = html;
}
toggleUnidad();
</script>
</body>
</html>
